
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="shrike505">
      
      
        <link rel="canonical" href="https://nest.shrike505.cc/notes/ComputerScience/ComputerSystem2/">
      
      
        <link rel="prev" href="../ComputerSystem1/">
      
      
        <link rel="next" href="../FDS/">
      
      
      <link rel="icon" href="../../../img/PP.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>计算机系统Ⅱ - 现实的荒原</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M320 96a32 32 0 1 1-64 0 32 32 0 1 1 64 0m21.1 80C367 158.8 384 129.4 384 96c0-53-43-96-96-96s-96 43-96 96c0 33.4 17 62.8 42.9 80H224c-17.7 0-32 14.3-32 32s14.3 32 32 32h32v208h-48c-53 0-96-43-96-96v-6.1l7 7c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9L97 263c-9.4-9.4-24.6-9.4-33.9 0L7 319c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l7-7v6.1c0 88.4 71.6 160 160 160h160c88.4 0 160-71.6 160-160v-6.1l7 7c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-56-56c-9.4-9.4-24.6-9.4-33.9 0l-56 56c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l7-7v6.1c0 53-43 96-96 96h-48V240h32c17.7 0 32-14.3 32-32s-14.3-32-32-32h-10.9z"/></svg>');--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m368.4 18.3-55.7 55.8 125.2 125.2 55.7-55.7c21.9-21.9 21.9-57.3 0-79.2l-46-46.1c-21.9-21.9-57.3-21.9-79.2 0M288 94.6l-9.2 2.8-144.1 43.2c-19.9 6-35.7 21.2-42.3 41L3.8 445.8c-3.8 11.3-1 23.9 7.3 32.4l153.6-153.5c-3-6.3-4.7-13.3-4.7-20.7 0-26.5 21.5-48 48-48s48 21.5 48 48-21.5 48-48 48c-7.4 0-14.4-1.7-20.7-4.7L33.7 500.9c8.6 8.3 21.1 11.2 32.4 7.3l264.3-88.6c19.7-6.6 35-22.4 41-42.3l43.2-144.1 2.7-9.2z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24m24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M272 384c9.6-31.9 29.5-59.1 49.2-86.2 5.2-7.1 10.4-14.2 15.4-21.4 19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3 5 7.2 10.2 14.3 15.4 21.4 19.8 27.1 39.7 54.4 49.2 86.2h160zm-80 128c44.2 0 80-35.8 80-80v-16H112v16c0 44.2 35.8 80 80 80m-80-336c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112 8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7l233.4-233.3c12.5-12.5 32.8-12.5 45.3 0z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512m-86.2-346.7c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1 0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6-13.3 0-24-10.7-24-24v-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1 0-8.4-6.8-15.1-15.1-15.1h-58.3c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1-64 0"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7.2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8.2-40.1l216-368C228.7 39.5 241.8 32 256 32m0 128c-13.3 0-24 10.7-24 24v112c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24m32 224a32 32 0 1 0-64 0 32 32 0 1 0 64 0"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3c4.97 0 9 3.58 9 8s-6 10-9 10-9-5.58-9-10 4.03-8 9-8m-1.69 7.93C9.29 9.29 7.47 8.58 6.25 9.34s-1.38 2.71-.36 4.35c1.03 1.64 2.85 2.35 4.07 1.59 1.22-.78 1.37-2.71.35-4.35m3.38 0c-1.02 1.64-.87 3.57.35 4.35 1.22.76 3.04.05 4.07-1.59 1.02-1.64.86-3.59-.36-4.35s-3.04-.05-4.06 1.59M12 17.75c-2 0-2.5-.75-2.5-.75 0 .03.5 2 2.5 2s2.5-2 2.5-2-.5.75-2.5.75"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32v11.5c0 49.9-60.3 74.9-95.6 39.6l-8.2-8.1C107.7 62.5 87.5 62.5 75 75s-12.5 32.8 0 45.3l8.2 8.2c35.2 35.2 10.2 95.5-39.7 95.5H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h11.5c49.9 0 74.9 60.3 39.6 95.6l-8.1 8.2c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l8.2-8.2c35.3-35.3 95.6-10.3 95.6 39.6V480c0 17.7 14.3 32 32 32s32-14.3 32-32v-11.5c0-49.9 60.3-74.9 95.6-39.6l8.2 8.2c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-8.2-8.2c-35.3-35.3-10.3-95.6 39.6-95.6h11.5c17.7 0 32-14.3 32-32s-14.3-32-32-32h-11.5c-49.9 0-74.9-60.3-39.6-95.6l8.2-8.2c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-8.2 8.2C348.3 118.4 288 93.4 288 43.5zM176 224a48 48 0 1 1 96 0 48 48 0 1 1-96 0m128 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M320 0c17.7 0 32 14.3 32 32v64h120c39.8 0 72 32.2 72 72v272c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72h120V32c0-17.7 14.3-32 32-32M208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16zM264 256a40 40 0 1 0-80 0 40 40 0 1 0 80 0m152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80M48 224h16v192H48c-26.5 0-48-21.5-48-48v-96c0-26.5 21.5-48 48-48m544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48h-16V224z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M288 0H128c-17.7 0-32 14.3-32 32s14.3 32 32 32v132.8c0 11.8-3.3 23.5-9.5 33.5L10.3 406.2C3.6 417.2 0 429.7 0 442.6 0 480.9 31.1 512 69.4 512h309.2c38.3 0 69.4-31.1 69.4-69.4 0-12.8-3.6-25.4-10.3-36.4L329.5 230.4c-6.2-10.1-9.5-21.7-9.5-33.5V64c17.7 0 32-14.3 32-32S337.7 0 320 0zm-96 196.8V64h64v132.8c0 23.7 6.6 46.9 19 67.1l34.5 56.1h-171l34.5-56.1c12.4-20.2 19-43.4 19-67.1"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6 31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5 50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5l112.2-112.3c31.5-31.5 82.5-31.5 114 0 27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0z"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../../../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../../../css/print-site.css">
    
      <link rel="stylesheet" href="../../../css/print-site-material.css">
    
      <link rel="stylesheet" href="../../../css/timeline.css">
    
      <link rel="stylesheet" href="https://fonts.loli.net/css2?family=Noto+Serif">
    
      <link rel="stylesheet" href="https://fonts.loli.net/css2?family=Victor+Mono">
    
      <link rel="stylesheet" href="https://fonts.loli.net/css2?family=Noto+Serif+SC">
    
      <link rel="stylesheet" href="https://fonts.loli.net/css2?family=Gloria+Hallelujah&display=swap">
    
      <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/lxgw-wenkai-screen-webfont/1.7.0/style.min.css">
    
      <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/juliamono/0.056/juliamono.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css">
    
      <link rel="stylesheet" href="../../../css/changelogs.css">
    
      <link rel="stylesheet" href="../../../css/newcolor.css">
    
      <link rel="stylesheet" href="../../../css/newfonts.css">
    
      <link rel="stylesheet" href="../../../css/newadmonitions.css">
    
      <link rel="stylesheet" href="../../../css/cards.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="theme" data-md-color-primary="1bdbe9b0" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ii" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="现实的荒原" class="md-header__button md-logo" aria-label="现实的荒原" data-md-component="logo">
      
  <img src="../../../img/PP.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            现实的荒原
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              计算机系统Ⅱ
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="theme" data-md-color-primary="1bdbe9b0" data-md-color-accent="indigo"  aria-label="光芒熄灭了。"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="光芒熄灭了。" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="把火点起来吧。"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="把火点起来吧。" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/shrike-505/Nest" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    shrike505
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="现实的荒原" class="md-nav__button md-logo" aria-label="现实的荒原" data-md-component="logo">
      
  <img src="../../../img/PP.png" alt="logo">

    </a>
    现实的荒原
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/shrike-505/Nest" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    shrike505
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shrike505's blog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../stories/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    小说
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            小说
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stories/G30/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    连霍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stories/Curse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    诅咒
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stories/Justice/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    正义
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stories/Fool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    愚者
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stories/Pepper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    花椒
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stories/Protein/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    蛋白
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stories/Vanishment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    烟消
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stories/Gunpowdersmoke/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    硝烟
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stories/Newcar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    新车
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stories/Weapon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    尺兵
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../stories/Mice/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    老鼠
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../thoughts/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    散文
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            散文
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../thoughts/Echo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    回声
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../thoughts/Gaut/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    痛风
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../thoughts/Homesick/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    故乡
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../thoughts/Gut/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    羊杂
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../thoughts/Fortune/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    富贵
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../thoughts/Unspoken/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    希音
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    笔记
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            笔记
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            AI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AI/AIY/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    人工智能引论
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AI/DAML/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据分析与机器学习
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Computer Science
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Computer Science
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ComputerSystem1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    计算机系统Ⅰ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    计算机系统Ⅱ
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    计算机系统Ⅱ
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#isa" class="md-nav__link">
    <span class="md-ellipsis">
      ISA 指令集体系结构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ISA 指令集体系结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    <span class="md-ellipsis">
      分类 - 根据内部存储结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#risc-v-isa" class="md-nav__link">
    <span class="md-ellipsis">
      RISC-V ISA 汇编
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addressing-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Addressing Mode 寻址模式
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pipelining" class="md-nav__link">
    <span class="md-ellipsis">
      Pipelining 流水线概述
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pipelining 流水线概述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solve-bottleneck" class="md-nav__link">
    <span class="md-ellipsis">
      Solve Bottleneck
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hazard" class="md-nav__link">
    <span class="md-ellipsis">
      Hazard 冲突
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hazard 冲突">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      结构冲突
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      数据冲突
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      控制冲突
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      非线性流水线
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-issue" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Issue 多发射
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multiple Issue 多发射">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#superscalar" class="md-nav__link">
    <span class="md-ellipsis">
      Superscalar 超标量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vliw-very-long-instruction-word" class="md-nav__link">
    <span class="md-ellipsis">
      VLIW (Very Long Instruction Word) 超长指令字
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#super-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Super-Pipeline 超流水线
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      冲突与中断
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#computer-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Computer Architecture 计算机体系结构
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operating-system" class="md-nav__link">
    <span class="md-ellipsis">
      Operating System 操作系统
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operating System 操作系统">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#elf" class="md-nav__link">
    <span class="md-ellipsis">
      ELF 概述
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ELF 概述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memory-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Layout 内存布局
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os-structure" class="md-nav__link">
    <span class="md-ellipsis">
      OS Structure 操作系统结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event" class="md-nav__link">
    <span class="md-ellipsis">
      Event 事件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-call" class="md-nav__link">
    <span class="md-ellipsis">
      System Call 系统调用（重点）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-service" class="md-nav__link">
    <span class="md-ellipsis">
      System Service 系统服务
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#process" class="md-nav__link">
    <span class="md-ellipsis">
      Process 进程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Process 进程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-control-block-pcb" class="md-nav__link">
    <span class="md-ellipsis">
      Process Control Block 进程控制块 PCB（重点）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-state" class="md-nav__link">
    <span class="md-ellipsis">
      Process State 进程状态
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Process Creation 进程创建
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Process Creation 进程创建">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exec" class="md-nav__link">
    <span class="md-ellipsis">
      exec*()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-termination" class="md-nav__link">
    <span class="md-ellipsis">
      Process Termination
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Process Termination">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wait" class="md-nav__link">
    <span class="md-ellipsis">
      wait()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exit" class="md-nav__link">
    <span class="md-ellipsis">
      exit()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signals" class="md-nav__link">
    <span class="md-ellipsis">
      Signals 信号
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zombie-process" class="md-nav__link">
    <span class="md-ellipsis">
      Zombie Process 僵尸进程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orphan-process" class="md-nav__link">
    <span class="md-ellipsis">
      Orphan Process 孤儿进程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Process Scheduling 进程调度
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Process Scheduling 进程调度">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#context-switch" class="md-nav__link">
    <span class="md-ellipsis">
      Context Switch 上下文切换（重点）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu-scheduling-cpu" class="md-nav__link">
    <span class="md-ellipsis">
      CPU Scheduling CPU调度
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CPU Scheduling CPU调度">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#io-burst-and-cpu-burst" class="md-nav__link">
    <span class="md-ellipsis">
      IO burst and CPU burst
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu-scheduler-cpu" class="md-nav__link">
    <span class="md-ellipsis">
      CPU Scheduler CPU调度器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling-objectives" class="md-nav__link">
    <span class="md-ellipsis">
      Scheduling Objectives 调度的目标
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-scheduling_1" class="md-nav__link">
    <span class="md-ellipsis">
      Process Scheduling 进程调度
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Process Scheduling 进程调度">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dispatcher" class="md-nav__link">
    <span class="md-ellipsis">
      Dispatcher
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      Scheduling Criteria 调度标准
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      Scheduling Algorithms 调度算法（重点！）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ipcinter-process-communication" class="md-nav__link">
    <span class="md-ellipsis">
      IPC(Inter-Process Communication) 进程间通信
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IPC(Inter-Process Communication) 进程间通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#models-of-ipc" class="md-nav__link">
    <span class="md-ellipsis">
      Models of IPC 进程间通信模型
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thread" class="md-nav__link">
    <span class="md-ellipsis">
      Thread 线程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Thread 线程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-vs-thread-vs" class="md-nav__link">
    <span class="md-ellipsis">
      Process vs Thread 进程 vs 线程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-model" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Model 线程模型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-library" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Library 线程库
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-thread" class="md-nav__link">
    <span class="md-ellipsis">
      Linux Thread
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Mapping 线程映射
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      Synchronization 同步
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Synchronization 同步">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      硬件支持
    </span>
  </a>
  
    <nav class="md-nav" aria-label="硬件支持">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-and-set" class="md-nav__link">
    <span class="md-ellipsis">
      Test-and-Set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compare-and-swap" class="md-nav__link">
    <span class="md-ellipsis">
      Compare-and-Swap
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atomic-variable" class="md-nav__link">
    <span class="md-ellipsis">
      Atomic Variable 原子性变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutex-lock-or-spin-lock" class="md-nav__link">
    <span class="md-ellipsis">
      Mutex Lock 互斥锁 or Spin Lock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semaphore" class="md-nav__link">
    <span class="md-ellipsis">
      Semaphore 信号量
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deadlock" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock 死锁
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deadlock 死锁">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#priority-inversion" class="md-nav__link">
    <span class="md-ellipsis">
      Priority Inversion 优先级反转
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condition-variable" class="md-nav__link">
    <span class="md-ellipsis">
      Condition Variable 条件变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-problems" class="md-nav__link">
    <span class="md-ellipsis">
      Real Problems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Real Problems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bounded-buffer-problem" class="md-nav__link">
    <span class="md-ellipsis">
      Bounded Buffer Problem 有界缓冲问题
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#readers-writers-problem" class="md-nav__link">
    <span class="md-ellipsis">
      Readers-Writers Problem 读者写者问题
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock_1" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock 发生的条件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-prevention" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock 的预防 Prevention
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-avoidance" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock 的避免 Avoidance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock 的检测 Detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock 的解决 Recovery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../FDS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据结构基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    高级数据结构
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    数理
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            数理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MathematicsAndPhysics/LinearAlgebra/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    线性代数Ⅱ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MathematicsAndPhysics/Analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数学分析Ⅱ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MathematicsAndPhysics/Physics1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    普通物理学Ⅰ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MathematicsAndPhysics/ODE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常微分方程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MathematicsAndPhysics/DiscreteMath/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    离散数学理论基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MathematicsAndPhysics/Probability/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    概率论
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MathematicsAndPhysics/Physics2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    普通物理学Ⅱ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Language
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Language
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Language/cs61a/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python - CS61A
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Language/Verilog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Verilog - HDLBits
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Language/Toefl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    托福
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Language/fimpp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fimpp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Language/Typst/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Typst备忘录
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    短学期
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            短学期
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SummerCourses/CTF/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CTF101
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../others/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    杂
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            杂
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/Quotes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    记念
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/final/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    年终总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/summer_idle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    暑假指南
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/Helix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Helix 学习日志
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    标签
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../friends/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    友谊是魔法！
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#isa" class="md-nav__link">
    <span class="md-ellipsis">
      ISA 指令集体系结构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ISA 指令集体系结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    <span class="md-ellipsis">
      分类 - 根据内部存储结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#risc-v-isa" class="md-nav__link">
    <span class="md-ellipsis">
      RISC-V ISA 汇编
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addressing-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Addressing Mode 寻址模式
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pipelining" class="md-nav__link">
    <span class="md-ellipsis">
      Pipelining 流水线概述
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pipelining 流水线概述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solve-bottleneck" class="md-nav__link">
    <span class="md-ellipsis">
      Solve Bottleneck
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hazard" class="md-nav__link">
    <span class="md-ellipsis">
      Hazard 冲突
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hazard 冲突">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      结构冲突
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      数据冲突
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      控制冲突
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      非线性流水线
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-issue" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Issue 多发射
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multiple Issue 多发射">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#superscalar" class="md-nav__link">
    <span class="md-ellipsis">
      Superscalar 超标量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vliw-very-long-instruction-word" class="md-nav__link">
    <span class="md-ellipsis">
      VLIW (Very Long Instruction Word) 超长指令字
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#super-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Super-Pipeline 超流水线
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      冲突与中断
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#computer-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Computer Architecture 计算机体系结构
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operating-system" class="md-nav__link">
    <span class="md-ellipsis">
      Operating System 操作系统
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operating System 操作系统">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#elf" class="md-nav__link">
    <span class="md-ellipsis">
      ELF 概述
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ELF 概述">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#memory-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Layout 内存布局
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os-structure" class="md-nav__link">
    <span class="md-ellipsis">
      OS Structure 操作系统结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event" class="md-nav__link">
    <span class="md-ellipsis">
      Event 事件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-call" class="md-nav__link">
    <span class="md-ellipsis">
      System Call 系统调用（重点）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-service" class="md-nav__link">
    <span class="md-ellipsis">
      System Service 系统服务
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#process" class="md-nav__link">
    <span class="md-ellipsis">
      Process 进程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Process 进程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-control-block-pcb" class="md-nav__link">
    <span class="md-ellipsis">
      Process Control Block 进程控制块 PCB（重点）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-state" class="md-nav__link">
    <span class="md-ellipsis">
      Process State 进程状态
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Process Creation 进程创建
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Process Creation 进程创建">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exec" class="md-nav__link">
    <span class="md-ellipsis">
      exec*()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-termination" class="md-nav__link">
    <span class="md-ellipsis">
      Process Termination
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Process Termination">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wait" class="md-nav__link">
    <span class="md-ellipsis">
      wait()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exit" class="md-nav__link">
    <span class="md-ellipsis">
      exit()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signals" class="md-nav__link">
    <span class="md-ellipsis">
      Signals 信号
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zombie-process" class="md-nav__link">
    <span class="md-ellipsis">
      Zombie Process 僵尸进程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orphan-process" class="md-nav__link">
    <span class="md-ellipsis">
      Orphan Process 孤儿进程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Process Scheduling 进程调度
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Process Scheduling 进程调度">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#context-switch" class="md-nav__link">
    <span class="md-ellipsis">
      Context Switch 上下文切换（重点）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu-scheduling-cpu" class="md-nav__link">
    <span class="md-ellipsis">
      CPU Scheduling CPU调度
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CPU Scheduling CPU调度">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#io-burst-and-cpu-burst" class="md-nav__link">
    <span class="md-ellipsis">
      IO burst and CPU burst
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu-scheduler-cpu" class="md-nav__link">
    <span class="md-ellipsis">
      CPU Scheduler CPU调度器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling-objectives" class="md-nav__link">
    <span class="md-ellipsis">
      Scheduling Objectives 调度的目标
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-scheduling_1" class="md-nav__link">
    <span class="md-ellipsis">
      Process Scheduling 进程调度
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Process Scheduling 进程调度">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dispatcher" class="md-nav__link">
    <span class="md-ellipsis">
      Dispatcher
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      Scheduling Criteria 调度标准
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduling-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      Scheduling Algorithms 调度算法（重点！）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ipcinter-process-communication" class="md-nav__link">
    <span class="md-ellipsis">
      IPC(Inter-Process Communication) 进程间通信
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IPC(Inter-Process Communication) 进程间通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#models-of-ipc" class="md-nav__link">
    <span class="md-ellipsis">
      Models of IPC 进程间通信模型
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thread" class="md-nav__link">
    <span class="md-ellipsis">
      Thread 线程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Thread 线程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-vs-thread-vs" class="md-nav__link">
    <span class="md-ellipsis">
      Process vs Thread 进程 vs 线程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-model" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Model 线程模型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-library" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Library 线程库
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-thread" class="md-nav__link">
    <span class="md-ellipsis">
      Linux Thread
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Mapping 线程映射
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      Synchronization 同步
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Synchronization 同步">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      硬件支持
    </span>
  </a>
  
    <nav class="md-nav" aria-label="硬件支持">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-and-set" class="md-nav__link">
    <span class="md-ellipsis">
      Test-and-Set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compare-and-swap" class="md-nav__link">
    <span class="md-ellipsis">
      Compare-and-Swap
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atomic-variable" class="md-nav__link">
    <span class="md-ellipsis">
      Atomic Variable 原子性变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutex-lock-or-spin-lock" class="md-nav__link">
    <span class="md-ellipsis">
      Mutex Lock 互斥锁 or Spin Lock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semaphore" class="md-nav__link">
    <span class="md-ellipsis">
      Semaphore 信号量
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deadlock" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock 死锁
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deadlock 死锁">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#priority-inversion" class="md-nav__link">
    <span class="md-ellipsis">
      Priority Inversion 优先级反转
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condition-variable" class="md-nav__link">
    <span class="md-ellipsis">
      Condition Variable 条件变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-problems" class="md-nav__link">
    <span class="md-ellipsis">
      Real Problems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Real Problems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bounded-buffer-problem" class="md-nav__link">
    <span class="md-ellipsis">
      Bounded Buffer Problem 有界缓冲问题
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#readers-writers-problem" class="md-nav__link">
    <span class="md-ellipsis">
      Readers-Writers Problem 读者写者问题
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock_1" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock 发生的条件
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-prevention" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock 的预防 Prevention
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-avoidance" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock 的避免 Avoidance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock 的检测 Detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock 的解决 Recovery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  
<nav class="md-tags" >
  
    
    
    
      <a href="../../../tags/#" class="md-tag">大二上笔记</a>
    
  
</nav>


  
  


<blockquote>
<p>Can u feel it?</p>
</blockquote>
<h1 id="ii">计算机系统 Ⅱ<a class="headerlink" href="#ii" title="Permanent link">&para;</a></h1>
<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> 约 8492 个字 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"/></svg></span> 182 行代码 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"/></svg></span> 38 张图片 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> 预计阅读时间 27 分钟</p>
</div>
<div class="admonition note">
<p class="admonition-title">Links</p>
<p><a href="https://note.tonycrane.cc/cs/pl/riscv/privileged/">https://note.tonycrane.cc/cs/pl/riscv/privileged/</a></p>
</div>
<h2 id="isa">ISA 指令集体系结构<a class="headerlink" href="#isa" title="Permanent link">&para;</a></h2>
<h3 id="-">分类 - 根据内部存储结构<a class="headerlink" href="#-" title="Permanent link">&para;</a></h3>
<ol>
<li>栈 Architecture<ul>
<li>操作数在栈顶（TOS: Top of Stack）</li>
<li>对于 C = A + B，指令为 <code>push A; push B; add; pop C</code></li>
</ul>
</li>
<li>累加器 Architecture<ul>
<li>一个隐式操作数来自累加寄存器，另一个来自内存，计算结果在累加寄存器中</li>
<li>对于 C = A + B，指令为 <code>load A, add B, store C</code></li>
</ul>
</li>
<li>寄存器-内存 Architecture<ul>
<li>所有指令都可以访问内存</li>
<li>第二个操作数（以下例子中为<code>B</code>）来自内存</li>
<li>对于 C = A + B，指令为 <code>load R1, A; Add R3, R1, B; Store R3, C</code></li>
</ul>
</li>
<li>寄存器-寄存器: Load/Store Architecture<ul>
<li>操作数都在寄存器中</li>
<li>对于 C = A + B，指令为 <code>Load R1, A; Load R2, B; Add R3, R1, R2; Store R3, C</code></li>
</ul>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Practice</p>
<p>D = A * B - (A + C * B)</p>
<details class="success">
<summary>Stack</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">push</span><span class="w"> </span><span class="no">A</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nf">push</span><span class="w"> </span><span class="no">B</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nf">mul</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="nf">push</span><span class="w"> </span><span class="no">A</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="nf">push</span><span class="w"> </span><span class="no">C</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="nf">push</span><span class="w"> </span><span class="no">B</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="nf">mul</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="nf">add</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="nf">sub</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="nf">pop</span><span class="w"> </span><span class="no">D</span>
</code></pre></div>
</details>
<details class="success">
<summary>Accumulater</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nf">load</span><span class="w"> </span><span class="no">B</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nf">mul</span><span class="w"> </span><span class="no">C</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nf">add</span><span class="w"> </span><span class="no">A</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="nf">store</span><span class="w"> </span><span class="no">D</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="nf">load</span><span class="w"> </span><span class="no">A</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="nf">mul</span><span class="w"> </span><span class="no">B</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="nf">sub</span><span class="w"> </span><span class="no">D</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="nf">store</span><span class="w"> </span><span class="no">D</span>
</code></pre></div>
</details>
<details class="success">
<summary>Register-Memory</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># 提供指令：add/sub/mul/load/store Reg, data</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nf">load</span><span class="w"> </span><span class="no">R1</span><span class="p">,</span><span class="w"> </span><span class="no">A</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="nf">mul</span><span class="w"> </span><span class="no">R1</span><span class="p">,</span><span class="w"> </span><span class="no">B</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="nf">load</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">C</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="nf">mul</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">B</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="nf">add</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">A</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="nf">store</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="no">D</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="nf">mul</span><span class="w"> </span><span class="no">R1</span><span class="p">,</span><span class="w"> </span><span class="no">D</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="nf">store</span><span class="w"> </span><span class="no">R1</span><span class="p">,</span><span class="w"> </span><span class="no">D</span>
</code></pre></div>
</details>
<details class="success">
<summary>Load-Store</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># 提供指令 add/sub/mul RegDest, Reg1, Reg2; load/store Reg, &amp;Mem</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nf">load</span><span class="w"> </span><span class="no">R1</span><span class="p">,</span><span class="w"> </span><span class="err">&amp;</span><span class="no">A</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nf">load</span><span class="w"> </span><span class="no">R2</span><span class="p">,</span><span class="w"> </span><span class="err">&amp;</span><span class="no">B</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="nf">load</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="err">&amp;</span><span class="no">C</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="nf">mul</span><span class="w"> </span><span class="no">R7</span><span class="p">,</span><span class="w"> </span><span class="no">R3</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="nf">add</span><span class="w"> </span><span class="no">R8</span><span class="p">,</span><span class="w"> </span><span class="no">R7</span><span class="p">,</span><span class="w"> </span><span class="no">R1</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="nf">mul</span><span class="w"> </span><span class="no">R9</span><span class="p">,</span><span class="w"> </span><span class="no">R1</span><span class="p">,</span><span class="w"> </span><span class="no">R2</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="nf">sub</span><span class="w"> </span><span class="no">R10</span><span class="p">,</span><span class="w"> </span><span class="no">R9</span><span class="p">,</span><span class="w"> </span><span class="no">R8</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="nf">store</span><span class="w"> </span><span class="no">R10</span><span class="p">,</span><span class="w"> </span><span class="err">&amp;</span><span class="no">D</span>
</code></pre></div>
</details>
</div>
<h3 id="risc-v-isa">RISC-V ISA 汇编<a class="headerlink" href="#risc-v-isa" title="Permanent link">&para;</a></h3>
<p>（其实是系统一的东西）32 位指令</p>
<ul>
<li>Opcode: 操作码，用于识别指令类型</li>
<li>rs1: the first register source operand</li>
<li>rs2: the second register source operand</li>
<li>rd: the register destination operand</li>
<li>funct3/7: （从Opcode的指令类型中）确定特定的指令</li>
<li>imm: immediate value or address</li>
</ul>
<p><img alt="" src="../assets/CS2.png" /></p>
<p>寄存器与内存：</p>
<p><img alt="" src="../assets/CS3.png" /></p>
<p>一些例子：</p>
<p><img alt="" src="../assets/CS4.png" /></p>
<h3 id="addressing-mode">Addressing Mode 寻址模式<a class="headerlink" href="#addressing-mode" title="Permanent link">&para;</a></h3>
<p><img alt="" src="../assets/Sys33.png" /></p>
<p>Also Ref: <a href="https://note.tonycrane.cc/cs/system/cs1/topic5/">https://note.tonycrane.cc/cs/system/cs1/topic5/</a></p>
<h2 id="pipelining">Pipelining 流水线概述<a class="headerlink" href="#pipelining" title="Permanent link">&para;</a></h2>
<p>通过Overlapping的方式，将多个指令的多个阶段同时进行，提高吞吐量，以提高CPU的效率。</p>
<p>定义吞吐量（Throughput/TP）：单位时间内完成的指令数。<br />
<span class="arithmatex">\(TP = \frac{n}{T} \lt TP_{max}\)</span>且<span class="arithmatex">\(T = (m+n-1) \times \Delta t_0\)</span>，其中<span class="arithmatex">\(m\)</span>为流水线级数，<span class="arithmatex">\(n\)</span>为指令数，<span class="arithmatex">\(\Delta t_0\)</span>为流水线时钟周期。</p>
<p><span class="arithmatex">\(TP_{max} = \lim_{n\to\infty} \frac{n}{T} = \frac{1}{\Delta t_0}\)</span></p>
<h3 id="solve-bottleneck">Solve Bottleneck<a class="headerlink" href="#solve-bottleneck" title="Permanent link">&para;</a></h3>
<ol>
<li>Subdivide the task</li>
<li>Repetition</li>
</ol>
<p>定义加速比（Speedup/SP）：<span class="arithmatex">\(Sp = \frac{Exetime_{non-pipe}}{Exetime_{pipe}} = \frac{nm\Delta t_0}{(m+n-1)\Delta t_0} = \frac{nm}{n+m-1}\)</span></p>
<p><span class="arithmatex">\(n \to \infty\)</span>时，<span class="arithmatex">\(Sp \to m\)</span> （理想加速比为流水线级数）</p>
<p>效率<span class="arithmatex">\(E = \frac{SP}{m} = TP \cdot \Delta t_0\)</span></p>
<h3 id="hazard">Hazard 冲突<a class="headerlink" href="#hazard" title="Permanent link">&para;</a></h3>
<h4 id="_1">结构冲突<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<p>多条指令在同一时钟周期抢着访问同一个物理资源。</p>
<p>Solution：</p>
<ul>
<li>Stall（Always works）</li>
<li>添加更多硬件</li>
</ul>
<h4 id="_2">数据冲突<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<h4 id="_3">控制冲突<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<div class="admonition note">
<p class="admonition-title">分支预测</p>
<ul>
<li>静态分支预测：总是预测分支不发生</li>
<li>动态分支预测：根据历史记录预测<ul>
<li>维护分支历史记录表（Branch History Table）</li>
</ul>
</li>
</ul>
</div>
<h2 id="_4">非线性流水线<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p><a href="https://blog.csdn.net/rizero/article/details/106740895">看这篇文章</a></p>
<h2 id="multiple-issue">Multiple Issue 多发射<a class="headerlink" href="#multiple-issue" title="Permanent link">&para;</a></h2>
<p>为了改进指令级别的并行（ILP, Instruction Level Parallelism），除了加深流水线外，还可以同时发射多条指令。</p>
<ul>
<li>静态多发射：编译器把多条指令打包到“issue slots”中<ul>
<li>编译器探测并避免冲突</li>
</ul>
</li>
<li>动态多发射：CPU解析指令流，选出多发射的指令<ul>
<li>编译器可以通过重排指令来提高多发射的效率</li>
</ul>
</li>
<li>CPU 在运行时解决冲突</li>
</ul>
<p>下面是三种多发射的处理器：</p>
<h3 id="superscalar">Superscalar 超标量<a class="headerlink" href="#superscalar" title="Permanent link">&para;</a></h3>
<ul>
<li>每个时钟周期发射的指令不固定，最多可达<span class="arithmatex">\(n\)</span>条。（称为<span class="arithmatex">\(n\)</span>-issue）</li>
<li>可以静态由编译器指定，或动态由Tomasulo算法决定</li>
</ul>
<h3 id="vliw-very-long-instruction-word">VLIW (Very Long Instruction Word) 超长指令字<a class="headerlink" href="#vliw-very-long-instruction-word" title="Permanent link">&para;</a></h3>
<ul>
<li>每个时钟周期的指令数是固定的，但是每条指令包含一条长指令或是指令 packet</li>
</ul>
<h3 id="super-pipeline">Super-Pipeline 超流水线<a class="headerlink" href="#super-pipeline" title="Permanent link">&para;</a></h3>
<ul>
<li>每个流水间阶段都被进一步细分，同一时钟周期内的多条指令可以 time-shared</li>
<li>For a super-pipelined computer that can flow out n instructions per clock cycle, one instruction is flowed out every 1/n clock cycle</li>
</ul>
<div class="admonition note">
<p class="admonition-title">上述几种的时空图如下</p>
<p><img alt="多发射" src="../assets/Sys34.png" /></p>
</div>
<h2 id="_5">冲突与中断<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<p>我感觉不考</p>
<h2 id="computer-architecture">Computer Architecture 计算机体系结构<a class="headerlink" href="#computer-architecture" title="Permanent link">&para;</a></h2>
<p>冯诺依曼架构：I/O System &lt;-&gt; CPU &lt;-&gt; Memory</p>
<p>存储在内存中的数据，基本单元是Byte，每个数据都被一个<strong>地址</strong>标记，一台机器上所有的地址的位数是一样的。</p>
<p>当一个程序加载到内存中，它的地址空间（Address Space）分为两部分：Code 和 Data。</p>
<h2 id="operating-system">Operating System 操作系统<a class="headerlink" href="#operating-system" title="Permanent link">&para;</a></h2>
<h3 id="elf">ELF 概述<a class="headerlink" href="#elf" title="Permanent link">&para;</a></h3>
<p>C程序编译为可执行文件的四个过程：</p>
<ul>
<li>预处理 —— 宏展开</li>
<li>编译 —— 源代码转为汇编</li>
<li>汇编 —— 汇编转为机器码</li>
<li>链接 —— 将多个目标文件链接为一个可执行文件，链接库</li>
</ul>
<p>最终的可执行文件包含一个 crt(C runtime)，这个 crt 内会调用 main 函数。</p>
<p>ELF - Executable and Linkable Format 二进制文件内包含如下段（Section）：</p>
<ul>
<li>.text: 代码段</li>
<li>.rodata: read only 数据段</li>
<li>.data: 初始化数据段</li>
<li>.bss: 未初始化数据段</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Quiz</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="w">    </span><span class="c1">// 如下均定义/声明在全局作用域</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// 存储在.data段</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="c1">// 存储在.bss段</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// 存储在.rodata段</span>
</code></pre></div>
</div>
<ul>
<li>
<p>Static linking</p>
<ul>
<li>All needed code is packed in single binary, leading to large binary</li>
<li><code>_start</code> is executed after evecve system call</li>
<li><img alt="" src="../assets/Sys7.png" /></li>
</ul>
</li>
<li>
<p>Dynamic linking</p>
<ul>
<li>Reuse libraries to reduce ELF file size</li>
<li>Howto resolve library calls?<ul>
<li>It is the loader who resolves lib calls.</li>
</ul>
</li>
<li>Entry point 是 loader</li>
</ul>
</li>
</ul>
<p><img alt="" src="../assets/Sys8.png" /></p>
<p><img alt="" src="../assets/Sys9.png" /></p>
<p><code>_libc_start_main</code>: Setup environment and stack, then call main</p>
<h4 id="memory-layout">Memory Layout 内存布局<a class="headerlink" href="#memory-layout" title="Permanent link">&para;</a></h4>
<p><img alt="" src="../assets/CS5.png" /></p>
<p>在二进制文件运行时的内存布局。</p>
<p>注意 stack 从高地址向低地址增长，heap 从低地址向高地址增长。</p>
<p><img alt="" src="../assets/CS6.png" /></p>
<div class="admonition note">
<p class="admonition-title">可能的考点（来自复习课）</p>
<ul>
<li>线程可以共享 Heap，但不共享 Stack，为什么？<ul>
<li>Stack 里含有返回地址等信息，不适合共享</li>
</ul>
</li>
</ul>
</div>
<blockquote>
<p>DMA(Direct Memory Access)：设备直接访问内存，不经过CPU。</p>
</blockquote>
<h3 id="os-structure">OS Structure 操作系统结构<a class="headerlink" href="#os-structure" title="Permanent link">&para;</a></h3>
<p><strong>操作系统是一种“Resource Allocator and Abstracter”</strong>，它管理硬件资源，提供抽象接口。</p>
<p><img alt="" src="../assets/Sys3.png" /></p>
<p>UI: CLI -&gt; GUI -&gt; Touchscreen...</p>
<ul>
<li>
<p>简单结构 Simple Structure</p>
<ul>
<li>MS-DOS</li>
<li>不区分用户和内核态</li>
<li>用户程序、操作系统程序、驱动程序都运行在同一个地址空间，可以互相操作</li>
</ul>
</li>
<li>
<p>整体结构 Monolithic Structure</p>
<ul>
<li>Unix</li>
<li>有区分用户和内核态</li>
<li>操作系统程序运行在内核态，用户程序运行在用户态</li>
<li>用户程序通过系统调用访问内核态</li>
<li>内核态程序给用户态程序接口来提供服务</li>
</ul>
</li>
<li>
<p>微内核结构 Microkernel Structure</p>
<ul>
<li>Mach, Minix...</li>
<li>防止内核态程序过于复杂，漏洞概率更大</li>
<li>尽可能多地将内核代码移动到用户态中</li>
<li>内核只提供最基本的服务，其他服务通过进程间通信实现：更稳定</li>
<li>将操作系统的功能分为多个独立的进程</li>
<li>可移植性更好</li>
</ul>
</li>
<li>
<p>模块化结构 Modular Structure</p>
<ul>
<li>Linux (Modular + Monolithic)</li>
<li>将内核分为多个模块（loadable kernel module），每个模块负责一个特定的功能</li>
<li>模块可以动态加载和卸载</li>
<li>保持了微内核结构的优点，同时减少了进程间通信的开销</li>
</ul>
</li>
<li>
<p>外核结构 Exokernel Structure</p>
<ul>
<li>外内核则进行更少的抽象，来让用户程序可以有更多控制物理资源的可能</li>
<li>内核只进行物理资源的分配和保护，而资源的使用、管理都由用户程序自己决定</li>
<li>用户程序可以直接访问硬件资源，自己实现操作系统的功能</li>
</ul>
</li>
<li>
<p>层级结构 Layered Structure</p>
<ul>
<li>为了提高模块化结构的性能，将模块分为多个层次</li>
<li>最底层权限最高，为硬件</li>
<li>每个层次只能调用比自己低的层次，不能调用比自己高的层次</li>
<li>例如，文件系统、网络协议栈等</li>
</ul>
</li>
<li>
<p>混合结构 Hybrid Structure</p>
<ul>
<li>结合了多种结构的优点</li>
<li>例如，Windows NT, Apple Mac OS X</li>
</ul>
</li>
</ul>
<h3 id="event">Event 事件<a class="headerlink" href="#event" title="Permanent link">&para;</a></h3>
<p>Event 分为 Interrupt - 由硬件引起，Exception - 由软件引起。</p>
<p>一些指令会被限制：只有OS能够执行它们（Privileged Instructions），CPU是如何判断当前状态能否执行这些指令的？</p>
<ul>
<li>All modern processors support (at least) two modes of execution:<ul>
<li>User mode: In this mode protected instructions cannot be executed</li>
<li>Kernel mode: In this mode all instructions can be executed</li>
<li>User code executes in user mode (<strong>e.g., application code</strong>)</li>
<li>Kernel code executes in kernel mode (<strong>e.g., OS code</strong>)</li>
<li>The mode is indicated by a status bit in a protected control register<ul>
<li>The CPU checks this bit before executing a protected instruction</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">可能的考点（来自复习课）</p>
<ul>
<li>狭义操作系统：Kernel Mode  </li>
<li>广义操作系统：Kernel Mode + 一部分 User Mode</li>
<li>User code executes in user mode (<strong>e.g., application code</strong>)</li>
<li>Kernel code executes in kernel mode (<strong>e.g., OS code</strong>)</li>
</ul>
</div>
<p><img alt="" src="../assets/Sys4.png" /></p>
<p>Event是操作流中“不被预期”的情况，CPU会根据Event的类型，调用相应的Handler。</p>
<ul>
<li>An event stops execution, changes mode, and changes context</li>
<li>The kernel defines a handlerfor each event type</li>
</ul>
<p>OS Code running: Boot -&gt; Wait for Event -&gt; Event Handler -&gt; Return to Wait</p>
<p>特殊的 Event：</p>
<ul>
<li>System Call - 会导致Trap -&gt; System Call Handler<ul>
<li>发生于User Mode下需要执行Privileged Instructions的情况<ul>
<li>e.g., to create a process, write to disk, read from the network card</li>
<li>每种ISA都有自己的System Call</li>
<li><img alt="" src="../assets/Sys6.png" /></li>
<li>为什么<code>printf</code>需要SysCall <code>libc_write</code>？<ul>
<li>打印到终端这种Device I/O需要 Kernel Mode (Privileged Instructions)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Timer Interrupt - 会导致Regularly Interrupt -&gt; Timer Interrupt Handler</li>
</ul>
<p><img alt="" src="../assets/Sys5.png" /></p>
<h3 id="system-call">System Call 系统调用（重点）<a class="headerlink" href="#system-call" title="Permanent link">&para;</a></h3>
<p>System Call 是<strong>操作系统</strong>提供给<strong>用户程序</strong>的<strong>接口</strong>（interface），用于访问操作系统的服务。</p>
<p>每个 Syscall 有自己的 Syscall Number，通过这个 Number 来调用 Syscall，这个 Number 就是 Syscall Table 的索引，OS 对具体的 Syscall 不感兴趣，只根据 Number 跳到 Kernel 中对应的 Handler。</p>
<div class="admonition note">
<p class="admonition-title">可能的考点（来自复习课）</p>
<ul>
<li>System Call 中是否存在 Context Switch？<ul>
<li>存在。</li>
</ul>
</li>
<li>Kernel Stack 和 User Stack 的区别？<ul>
<li>Kernel Stack 大小固定，还含有 PCB 的指针信息</li>
</ul>
</li>
</ul>
</div>
<p><code>strace</code>可以查看程序的System Call。</p>
<p><a href="https://www.cnblogs.com/machangwei-8/p/10388883.html">https://www.cnblogs.com/machangwei-8/p/10388883.html</a></p>
<p>SysCall的类型：</p>
<ul>
<li>
<p>Process control</p>
<ul>
<li>create process, terminate process</li>
<li>end, abort</li>
<li>load, execute</li>
<li>get process attributes, set process attributes</li>
<li>wait for time</li>
<li>wait event, signal event</li>
<li>allocate and free memory</li>
<li>Dump memory if error</li>
<li>Debuggerfor determining bugs, single step execution</li>
<li>Locks for managing access to shared data between processes</li>
</ul>
</li>
<li>
<p>File management</p>
<ul>
<li>create file, delete fileopen, close fileread, write, reposition</li>
<li>get and set file attributes</li>
</ul>
</li>
<li>
<p>Device management</p>
<ul>
<li>request device, release device</li>
<li>read, write, repositionget device attributes, set device attributes</li>
<li>logically attach or detach devices</li>
</ul>
</li>
<li>
<p>Information maintenance</p>
<ul>
<li>get time or date, set time or date</li>
<li>get system data, set system data</li>
<li>get and set process, file, or device attributes</li>
</ul>
</li>
<li>
<p>Communications</p>
<ul>
<li>create, delete communication connection</li>
<li>send, receive messages if message passing model to host nameor process name<ul>
<li>From client to server</li>
</ul>
</li>
<li>Shared-memory model create and gain access to memory regions</li>
<li>transfer status information</li>
<li>attach and detach remote devices</li>
</ul>
</li>
<li>
<p>Protection</p>
<ul>
<li>Control access to resources</li>
<li>Get and set permissions</li>
<li>Allow and deny user access</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">可能的考点（来自复习课）</p>
<ul>
<li><code>kernel_entry</code> 在 Syscall 时被调用，用于保存 User Space 的寄存器信息</li>
<li><code>ret_to_user</code> 在 Syscall 结束时被调用，用于恢复 User Space 的寄存器信息，把控制流交还给 User Space</li>
</ul>
</div>
<h3 id="system-service">System Service 系统服务<a class="headerlink" href="#system-service" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">可能的考点（来自复习课）</p>
<ul>
<li>动态链接和静态链接的区别和优劣？<ul>
<li>静态链接：所有的库都被打包进可执行文件，文件较大</li>
<li>动态链接：只有一个 loader，运行时运行<code>ld.so</code>，解析符号表，加载库，文件较小</li>
</ul>
</li>
</ul>
</div>
<h2 id="process">Process 进程<a class="headerlink" href="#process" title="Permanent link">&para;</a></h2>
<p>进程是一个正在执行的程序的实例，例如说一个ELF加载到内存中，开始执行。</p>
<blockquote>
<p>a unit of resource allocation and protection</p>
</blockquote>
<p>对于同一个Program的不同Process，它们的</p>
<ul>
<li>.text段是相同的（Size &amp; Content）</li>
<li>.data段的Size是相同的，但Content可能不同</li>
<li>Stack和Heap两者都不同</li>
</ul>
<div class="admonition note">
<p class="admonition-title">可能的考点（来自复习课）</p>
<ul>
<li>进程是 a unit of resource allocation and protection</li>
<li>线程是 a unit of execution</li>
</ul>
</div>
<h3 id="process-control-block-pcb">Process Control Block 进程控制块 PCB（重点）<a class="headerlink" href="#process-control-block-pcb" title="Permanent link">&para;</a></h3>
<p>也称为Task Control Block，是操作系统用来管理进程的数据结构，存储每个进程的信息。</p>
<ul>
<li>每个进程有且仅有一个PCB。</li>
<li>在新进程创建时，OS会为其分配一个PCB</li>
<li>
<p>在进程终止时，OS会回收PCB</p>
</li>
<li>
<p>存储这些 Process 的 META data：</p>
</li>
<li>Process State - Running, waiting, ready, etc.</li>
<li>Program Counter - Address of next instruction</li>
<li>CPU Registers - Values of all process-centric registers</li>
<li>Blah blah blah...</li>
<li><img alt="" src="../assets/Sys10.png" /></li>
</ul>
<p>On Linux: PCB is <code>task_struct</code></p>
<h3 id="process-state">Process State 进程状态<a class="headerlink" href="#process-state" title="Permanent link">&para;</a></h3>
<p>As a process executes, it changes state. The state of a process is defined in part by the current activity of that process.</p>
<ul>
<li>New: The process is being created.</li>
<li>Running: Instructions are being executed.</li>
<li>Waiting: The process is waiting for some event to occur.</li>
<li>Ready: The process is waiting to be assigned to a processor.</li>
<li>Terminated: The process has finished execution.</li>
<li><img alt="" src="../assets/Sys11.png" /></li>
</ul>
<h3 id="process-creation">Process Creation 进程创建<a class="headerlink" href="#process-creation" title="Permanent link">&para;</a></h3>
<p>一个进程可能会产生多个进程，于是形成一个进程树，ppid是某节点父进程的pid。</p>
<p><code>fork()</code>是一个SysCall，用于创建一个新的进程，新进程是调用进程的副本（各状态初始完全一致地复制过去），但是有不同的pid，Resource Utilization初始化为0。</p>
<ul>
<li>返回给父进程的是新进程的pid</li>
<li>返回给子进程的是0</li>
</ul>
<div class="admonition note">
<p class="admonition-title">可能的考点（来自复习课）</p>
<ul>
<li>为什么<code>fork()</code>可以返回两个值？<ul>
<li>这是其拷贝了两份 User Space Context</li>
</ul>
</li>
</ul>
</div>
<details class="info" open="open">
<summary>Quiz</summary>
<p>下面这张图里，每次<code>fork()</code>会给当前每个进程都创建一个子进程，所以第一次<code>fork()</code>后有两个进程，第二次<code>fork()</code>后有四个进程。<br />
<img alt="" src="../assets/Sys13.png" />
<img alt="" src="../assets/Sys12.png" /></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">arg</span><span class="p">[]){</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">        </span><span class="n">fork</span><span class="p">();</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">fork</span><span class="p">())</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">            </span><span class="n">fork</span><span class="p">();</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">        </span><span class="n">fork</span><span class="p">();</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div>
上面这段代码会产生多少个进程？ ——12个</p>
<ul>
<li>(1) 第一行<code>fork()</code>后，有两个进程（Original进程和它fork出来的子进程）</li>
<li>(2) 第二行在if后括号中的<code>fork()</code>后，有四个进程</li>
<li>(3) 并且对 (1) 中两个进程，返回1，对 (2) 中新出现的两个进程，返回0</li>
<li>因此 (1) 中两个进程进入if(){}, (2) 中两个进程<strong>不进入</strong>if(){}</li>
<li>在条件语句中的<code>fork()</code>后，新出现两个进程，目前共6个进程</li>
<li>最后的<code>fork()</code>所有进程都会执行，所以最后有12个进程</li>
</ul>
</details>
<h4 id="exec">exec*()<a class="headerlink" href="#exec" title="Permanent link">&para;</a></h4>
<p><code>execve()</code>是一个SysCall，v stands for <code>argv</code>（命令行参数），e stands for <code>envp</code>（环境变量）。</p>
<ul>
<li>其余的<code>exec*()</code>函数类似，但不是SysCall</li>
<li><code>exec*()</code> replaces the current process image with a new process image</li>
<li><img alt="" src="../assets/Sys14.png" /></li>
<li><code>exec*</code>后，若执行成功，原进程的ELF会被替换，原进程<strong>直接终止</strong>，也没有返回值；若没有执行成功，则返回报错信息，原进程<strong>继续执行</strong>。</li>
</ul>
<h3 id="process-termination">Process Termination<a class="headerlink" href="#process-termination" title="Permanent link">&para;</a></h3>
<h4 id="wait">wait()<a class="headerlink" href="#wait" title="Permanent link">&para;</a></h4>
<p><img alt="" src="../assets/Sys15.png" /></p>
<h4 id="exit">exit()<a class="headerlink" href="#exit" title="Permanent link">&para;</a></h4>
<p>一个进程通过<code>exit()</code>的SysCall来终止自己，接收一个参数（exit/return code）</p>
<ul>
<li>进程终止后，进程占用的资源会被回收</li>
</ul>
<h3 id="signals">Signals 信号<a class="headerlink" href="#signals" title="Permanent link">&para;</a></h3>
<p>进程可以通过信号来通知其他进程，也可以接收信号，例如说Ctrl+C实则是发送了一个SIGINT信号。</p>
<ul>
<li>异步事件，程序必须处理</li>
<li>SIGKILL和SIGSTOP不能被捕获或忽略（for security reasons）<ul>
<li>总能Kill进程</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">demo: kill a infinite loop with SIGINT forbidden</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="w">    </span><span class="cp">#include</span><span class="cpf">&lt;signal.h&gt;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span><span class="cp">#include</span><span class="cpf">&lt;stdio.h&gt;</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">handler</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">sig</span><span class="p">){</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">        </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stdout</span><span class="p">,</span><span class="err">”</span><span class="n">I</span><span class="w"> </span><span class="n">don</span><span class="err">’</span><span class="n">t</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">die</span><span class="o">!</span><span class="err">\</span><span class="n">n</span><span class="err">”</span><span class="p">);</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">        </span><span class="k">return</span><span class="p">;</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">    </span><span class="n">main</span><span class="p">(){</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">        </span><span class="n">signal</span><span class="p">(</span><span class="n">SIGINT</span><span class="p">,</span><span class="w"> </span><span class="n">handler</span><span class="p">);</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">        </span><span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="c1">// infinite loop</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div>
</div>
<h3 id="zombie-process">Zombie Process 僵尸进程<a class="headerlink" href="#zombie-process" title="Permanent link">&para;</a></h3>
<p>子进程死亡后，它的父进程会接收到通知去执行一些清理操作，如释放内存之类。然而，若父进程并未察觉到子进程死亡（<strong>没有回收其PCB</strong>），子进程就会进入到“ 僵尸(zombie)”状态。从父进程角度看，子进程仍然存在，即使子进程实际上已经死亡。</p>
<p>Zombie 会占用其 PCB，不会占用CPU，但会占用内存。</p>
<p>A zombie lingers on until:</p>
<ul>
<li>its parent has handled SIGCHLD (which calls wait() for the child), or</li>
<li>its parent dies</li>
</ul>
<p><img alt="" src="../assets/Sys16.png" /></p>
<h3 id="orphan-process">Orphan Process 孤儿进程<a class="headerlink" href="#orphan-process" title="Permanent link">&para;</a></h3>
<p>父进程运行结束，但子进程还在运行（未运行结束）的子进程就称为孤儿进程（Orphan Process）。孤儿进程最终会被 init 进程（pid 为 1）所收养，并由 init 进程对它们完成状态收集工作。</p>
<p>孤儿进程是没有父进程的进程，为避免孤儿进程退出时无法释放所占用的资源而变为僵尸进程，进程号为 1 的 init 进程将会接受这些孤儿进程，这一过程也被称为“收养”。init 进程就好像是一个孤儿院，专门负责处理孤儿进程的善后工作。每当出现一个孤儿进程的时候，内核就把孤儿进程的父进程设置为 init ，而 init 进程会循环地 wait() 它的已经退出的子进程。这样，当一个孤儿进程凄凉地结束了其生命周期的时候，init 进程就会出面处理它的一切善后工作。因此孤儿进程并不会有什么危害。</p>
<blockquote>
<p>When a child exits, a SIGCHLD signal is sent to the parent.</p>
</blockquote>
<p>init process handles child termination with a handler for SIGCHLD that calls wait().</p>
<h3 id="process-scheduling">Process Scheduling 进程调度<a class="headerlink" href="#process-scheduling" title="Permanent link">&para;</a></h3>
<p>为了使CPU迅速地切换到下一个进程，<strong>Process scheduler</strong> 在 Ready 的进程中选择下一个在 Core 上运行的进程。</p>
<p>维护两个 Scheduling Queue：</p>
<ul>
<li>
<p>Ready queue</p>
<ul>
<li>set of all processes residing in main memory, ready and waiting to execute</li>
</ul>
</li>
<li>
<p>Wait queues</p>
<ul>
<li>set of processes waiting for an event (i.e. I/O)</li>
</ul>
</li>
<li>
<p>进程在不同的 Queue 中频繁 Transfer，因此需要用 List 实现。</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">list_head</span><span class="p">{</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">list_head</span><span class="w"> </span><span class="o">*</span><span class="n">next</span><span class="p">,</span><span class="o">*</span><span class="n">prev</span><span class="p">;</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="p">};</span>
</code></pre></div>
<p><img alt="" src="../assets/Sys17.png" /></p>
<h4 id="context-switch">Context Switch 上下文切换（重点）<a class="headerlink" href="#context-switch" title="Permanent link">&para;</a></h4>
<blockquote>
<p>由于在处理 trap 时，有可能会改变系统的状态。所以在真正处理 trap 之前，我们有必要对系统的当前状态进行保存，在处理完成之后，我们再将系统恢复至原先的状态，就可以确保之前的程序继续正常运行。这里的系统状态通常是指寄存器，这些寄存器也叫做 CPU 的上下文（context）。<br />
ZJU-SYS2-FA24</p>
</blockquote>
<p>当CPU从一个进程（实则是线程Thread）切换到另一个进程时，需要保存当前进程的状态，并加载新进程的已保存的状态，这就是上下文切换。</p>
<ul>
<li>Context of a process is represented in the PCB</li>
<li>Switch 时，System 本身并不进行什么操作</li>
</ul>
<ol>
<li>
<p>在两个Kernel线程中的上下文切换</p>
<ul>
<li>寄存器在什么时候/哪里保存？</li>
<li>where: 保存在PCB中，即<code>cpu_context</code></li>
<li>when: 在<code>context_switch()</code>中，即在<code>cpu_switch_to()</code>中</li>
</ul>
</li>
<li>
<p>在两个用户线程中的上下文切换</p>
<ul>
<li>令人感叹的是，上下文切换<strong>必须</strong>在内核态中进行</li>
<li>User context 在什么时候/哪里保存？</li>
<li>when: kernel_entry; where: 每个线程（per thread）的 kernel stack 中，确切说是<code>pt_regs</code>结构体内</li>
<li>Kernel context 在什么时候/哪里保存？</li>
<li>when: <code>cpu_switch_to()</code>; where: <code>cpu_context</code></li>
<li><img alt="Switch1" src="../assets/Sys29.png" /></li>
<li>下面是一个俩 User 线程的上下文切换的例子</li>
<li><img alt="" src="../assets/Sys18.png" /></li>
</ul>
</li>
</ol>
<h3 id="cpu-scheduling-cpu">CPU Scheduling CPU调度<a class="headerlink" href="#cpu-scheduling-cpu" title="Permanent link">&para;</a></h3>
<ul>
<li>定义：操作系统决定哪个进程在CPU上运行，要运行多久</li>
<li>使用 dispatcher 进行切换<ul>
<li>A component of the OS that’s used to switch between processes</li>
</ul>
</li>
</ul>
<h4 id="io-burst-and-cpu-burst">IO burst and CPU burst<a class="headerlink" href="#io-burst-and-cpu-burst" title="Permanent link">&para;</a></h4>
<p>大多数进程的执行时间是由CPU burst和IO burst交替组成的。</p>
<p>因此进程可以分为两类：</p>
<ul>
<li>
<p>IO bound 进程</p>
<ul>
<li>大多数时间等待IO</li>
<li>包含许多短小的CPU burst</li>
<li>e.g. /bin/cp</li>
</ul>
</li>
<li>
<p>CPU bound 进程</p>
<ul>
<li>大多数时间在CPU上运行</li>
<li>IO burst很短很短（如果有的话）</li>
<li>e.g. /bin/gcc</li>
</ul>
</li>
</ul>
<h4 id="cpu-scheduler-cpu">CPU Scheduler CPU调度器<a class="headerlink" href="#cpu-scheduler-cpu" title="Permanent link">&para;</a></h4>
<p>操作系统跟踪进程的状态，在 CPU 空闲时选择下一个进程运行。</p>
<p>调度可分为两类</p>
<ul>
<li>
<p>Preemptive Scheduling（可抢占式调度）</p>
<ul>
<li>进程即使在正常执行时，也可以被抢占</li>
<li>Easy for CPU to handle, most of modern choices.</li>
</ul>
</li>
<li>
<p>Non-preemptive Scheduling（非抢占式调度）</p>
<ul>
<li>进程只能在执行完毕或者等待IO时才能被抢占（hold CPU until it's willing to give it up）</li>
</ul>
</li>
</ul>
<p>那么调度发生在什么时候？</p>
<p><img alt="" src="../assets/Sys19.png" /></p>
<h4 id="scheduling-objectives">Scheduling Objectives 调度的目标<a class="headerlink" href="#scheduling-objectives" title="Permanent link">&para;</a></h4>
<ul>
<li>最大化 CPU 利用率</li>
<li>最大化吞吐量</li>
<li>最小化等待时间</li>
<li>
<p>最小化周转时间（Turnaround time）</p>
<ul>
<li>Time from process creation to completion</li>
</ul>
</li>
<li>
<p>最小化响应时间</p>
<ul>
<li>Time from process creation to first response</li>
</ul>
</li>
</ul>
<h3 id="process-scheduling_1">Process Scheduling 进程调度<a class="headerlink" href="#process-scheduling_1" title="Permanent link">&para;</a></h3>
<p>为了使CPU迅速地切换到下一个进程，<strong>Process scheduler</strong> 在 Ready 的进程中选择下一个在 Core 上运行的进程。</p>
<p>维护两个 Scheduling Queue：</p>
<ul>
<li>
<p>Ready queue</p>
<ul>
<li>set of all processes residing in main memory, ready and waiting to execute</li>
</ul>
</li>
<li>
<p>Wait queues</p>
<ul>
<li>set of processes waiting for an event (i.e. I/O)</li>
</ul>
</li>
<li>
<p>进程在不同的 Queue 中频繁 Transfer，因此需要用 List 实现。</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">list_head</span><span class="p">{</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">list_head</span><span class="w"> </span><span class="o">*</span><span class="n">next</span><span class="p">,</span><span class="o">*</span><span class="n">prev</span><span class="p">;</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="p">};</span>
</code></pre></div>
<p><img alt="" src="../assets/Sys17.png" /></p>
<h4 id="dispatcher">Dispatcher<a class="headerlink" href="#dispatcher" title="Permanent link">&para;</a></h4>
<p>Dispatcher 把CPU的选择交给被 Scheduler 选中的进程，包括切换至Kernel态，保存当前进程的PCB，加载新进程的PCB。</p>
<ul>
<li>Dispatch Latency: Time it takes for the dispatcher to stop one process and start another running</li>
</ul>
<h4 id="scheduling-criteria">Scheduling Criteria 调度标准<a class="headerlink" href="#scheduling-criteria" title="Permanent link">&para;</a></h4>
<ul>
<li>CPU Utilization</li>
<li>Throughput</li>
<li>Turnaround Time: <strong>Finsh Time - Arrival Time</strong></li>
<li>Waiting Time: <strong>Start Time - Arrival Time</strong></li>
<li>Response Time</li>
</ul>
<h4 id="scheduling-algorithms">Scheduling Algorithms 调度算法（重点！）<a class="headerlink" href="#scheduling-algorithms" title="Permanent link">&para;</a></h4>
<ul>
<li>FCFS (First-Come, First-Served)</li>
<li>SJF (Shortest Job First)</li>
<li>Round Robin</li>
<li>Priority Scheduling</li>
<li>Multilevel Queue Scheduling</li>
<li>Multilevel Feedback Queue Scheduling</li>
</ul>
<p>这里要画图了！注意 Burst Time 可看作执行时间。</p>
<details class="info">
<summary>FCFS</summary>
<ul>
<li>First-Come, First-Served</li>
<li>Non-preemptive</li>
<li>Easy to understand and implement</li>
<li>Poor in performance: 长进程会导致短进程等待时间过长</li>
<li>Burst Time: P1: 24, P2: 3, P3: 3，这里展示一下以<code>123</code>的顺序执行的情况，会发现比<code>321</code>的情况要差很多</li>
<li><img alt="" src="../assets/Sys20.png" /></li>
</ul>
</details>
<details class="info">
<summary>SJF</summary>
<ul>
<li>理论上的最佳方案</li>
<li>可分为两类：Non-preemptive SJF, Preemptive SJF<ul>
<li>Non-preemptive SJF<ul>
<li>选择最短的 <strong>总的</strong> Burst 时间</li>
<li><img alt="" src="../assets/Sys21.png" /></li>
</ul>
</li>
<li>Preemptime SJF<ul>
<li>选择最短的 <strong>剩余 Burst 时间</strong></li>
<li><img alt="" src="../assets/Sys22.png" /></li>
<li>这里 turnaround time 是一样的，还是完成时间减去 Arrival Time；对于 Waitng Time，会出现图里 P1 P2 这种分段执行的，这时 Waiting Time 就要分成两部分：从 Arrive 到第一次执行的时间间隔，再加上每次执行的结束时间到下次执行的开始时间的间隔 </li>
<li>但是很难知道每个进程的 Burst Time</li>
<li>可以通过已发生过的 CPU Burst 预测</li>
</ul>
</li>
</ul>
</li>
</ul>
</details>
<details class="info">
<summary>Round Robin</summary>
<ul>
<li>
<p>Preemptive</p>
</li>
<li>
<p>定义一个时间片（Time Quantum）：作为每个进程每次持续的最长时间</p>
</li>
<li>
<p>除非只剩下一个 READY 进程，否则，一个进程最多执行一个时间片长度后就得把 CPU 使用权交给另一个 READY 进程。</p>
</li>
<li>
<p>Ready Queue 是 First-IN-First-OUT</p>
</li>
<li>
<p>Scheduling:</p>
<ul>
<li>
<p>从 Ready Queue 中选出第一个进程</p>
</li>
<li>
<p>设置计时器，在一个时间片长度后中断进程</p>
</li>
<li>
<p>Dispatch 该进程</p>
</li>
</ul>
</li>
<li>
<p><img alt="" src="../assets/Sys25.png" />      </p>
</li>
<li>
<p>因此对时间片的选取很重要：长 or 短？</p>
<ul>
<li>
<p>短时间片</p>
<ul>
<li>响应时间/互动率很好！但是额外开销太大了：因为 Dispatch 时 Context Switch 太多太耗时。</li>
</ul>
</li>
<li>
<p>长时间片</p>
<ul>
<li>响应时间很差，额外开支变少了：时间片很长很长时就变成 FCFS 型了</li>
</ul>
</li>
</ul>
</li>
</ul>
</details>
<details class="info">
<summary>Priority Scheduling</summary>
<ul>
<li>Non-Preemptive or Preemptive</li>
<li>为每个进程定义一个优先级（一个数字）<ul>
<li>也即把 Ready Queue 利用为一个优先队列</li>
</ul>
</li>
<li>优先级高的（一般是数字小的）先执行</li>
<li>其实优先级取“预测的下一次 Burst TIme”时就是SJF</li>
<li><img alt="" src="../assets/Sys23.png" />      </li>
<li>来看一个优先级调度和 Round Robin 的综合<ul>
<li><img alt="" src="../assets/Sys24.png" /></li>
</ul>
</li>
<li>Problem：低优先级的进程总会被抢占，几乎永不执行（Starvation）<ul>
<li>Solution：Increase the priority of a process as it <strong>ages</strong>.</li>
</ul>
</li>
</ul>
</details>
<details class="info">
<summary>Multilevel Queue</summary>
<ul>
<li>
<p>ready queue 被分成多个队列</p>
</li>
<li>
<p>比如分成交互性队列和批处理队列</p>
</li>
<li>
<p>一个进程会被永久地分到一个队列中</p>
</li>
<li>
<p>每个队列可以使用不同的 Scheduling Algorithm</p>
</li>
<li>
<p>例如，高交互性的进程队列可以使用 RR 算法，低交互的批处理队列可以使用 FCFS 算法</p>
</li>
<li>
<p>队列之间也可以进行调度</p>
</li>
</ul>
</details>
<details class="info">
<summary>Multilevel Feedback Queues</summary>
<p>类似 Multilevel Queue，但是进程可以在不同队列之间移动。</p>
<p>给交互性、I/O intensive 的进程更高的调度优先级</p>
<p>最最常见的调度算法</p>
</details>
<h2 id="ipcinter-process-communication">IPC(Inter-Process Communication) 进程间通信<a class="headerlink" href="#ipcinter-process-communication" title="Permanent link">&para;</a></h2>
<p>进程间通信是指两个或多个进程之间交换信息的机制。</p>
<p>进程可以通过通信进行”合作“，例如说文件这类信息在不同进程中的共享，或者说对同一个任务的 Multi-processing。</p>
<div class="admonition example">
<p class="admonition-title">Chrome Browser</p>
<p>Chrome浏览器使用进程隔离，每个标签页都是一个进程，这样一个标签页崩溃不会影响其他标签页。</p>
<ul>
<li>Browser Process: 管理所有的标签页，UI，硬盘和网络的IO</li>
<li>Renderer Process: 每个标签页一个进程，负责渲染页面，读取HTML &amp; CSS，加载JS。</li>
<li>在一个沙盒里运行，限制了对系统的访问</li>
<li>Plugin Process: 每个插件一个进程，如Flash Player</li>
</ul>
</div>
<h3 id="models-of-ipc">Models of IPC 进程间通信模型<a class="headerlink" href="#models-of-ipc" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>共享内存（Shared Memory）</p>
<ul>
<li><img alt="" src="../assets/Sys26.png" /></li>
<li>low-overhead: almost no SysCall</li>
<li>One process creates a shared memory segment</li>
<li>Processes can then “attach” it to their address spaces</li>
<li>两个进程单独地访问共享内存</li>
</ul>
</li>
<li>
<p>Message Passing</p>
<ul>
<li><img alt="" src="../assets/Sys27.png" /></li>
<li>high-overhead: 需要通过System Call进入Kernel态获取Message</li>
<li>每次的Message很小</li>
<li>创造一个邮筒（Mailbox），通过邮筒发送与接收消息，摧毁邮筒</li>
<li>
<p>Blocking or Non-blocking</p>
<ul>
<li>Blocking(同步)：发送者在信息被接收前一直Block，接收者在信息到达前一直Block</li>
<li>Non-blocking(异步)：发送者持续发消息，接收者接收一条有效信息或者空消息</li>
</ul>
</li>
<li>
<p>这里有一个 Buffering 的概念：</p>
<ul>
<li>Queue of messages attached to the link.</li>
<li>
<p>Implemented in one of three ways</p>
<ol>
<li>Zero capacity – no messages are queued on a link.<br />
   Sender must wait for receiver</li>
<li>Bounded capacity – finite length of n messages<br />
   Sender must wait if link full</li>
<li>Unbounded capacity – infinite length<br />
   Sender never waits</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Pipe</p>
<ul>
<li>Ordinary Pipe<ul>
<li>一个进程写，一个进程读</li>
<li>一般是父子进程间通信</li>
<li>进程外无法访问</li>
<li>进程产生者写到<code>fd[1]</code>的 write-end，进程产生者读取<code>fd[0]</code>的 read-end</li>
<li>因此是单向的</li>
<li>On Windows: Anonymous Pipe</li>
</ul>
</li>
<li>Named Pipe<ul>
<li>两个进程之间通信</li>
<li>通过文件系统</li>
<li>双向</li>
<li>有名管道是一种特殊类型的文件，它允许无关的进程之间进行通信</li>
<li>与无名管道不同，有名管道有一个路径名与之关联，以<code>mkfifo()</code>创建</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="thread">Thread 线程<a class="headerlink" href="#thread" title="Permanent link">&para;</a></h2>
<h3 id="process-vs-thread-vs">Process vs Thread 进程 vs 线程<a class="headerlink" href="#process-vs-thread-vs" title="Permanent link">&para;</a></h3>
<p>线程是进程的一个 Execution Unit，一个进程可以包含多个线程。每个线程有自己的 Stack 和 PC, Regs，但是共享 Data Section、Heap 和 Code Section。</p>
<p><strong>简单来说，线程是执行单元，进程是资源管理单元</strong></p>
<p><img alt="" src="../assets/Sys28.png" /></p>
<ul>
<li>Single-threaded Process<ul>
<li>一个进程只有一个线程</li>
</ul>
</li>
<li>Multi-threaded Process<ul>
<li>一个进程有多个线程</li>
</ul>
</li>
</ul>
<p>使用线程的优势：</p>
<ul>
<li>Economical<ul>
<li>创建线程比创建进程开销更少（Code Section、Data Section、Heap 已经被加载）</li>
</ul>
</li>
<li>Resource Sharing<ul>
<li>线程本身就是共享资源的</li>
<li>No more need for IPC</li>
</ul>
</li>
<li>Responsiveness</li>
<li>Scalability<ul>
<li>一个进程中的多个线程可以并行执行，提高效率</li>
</ul>
</li>
</ul>
<p>劣势：</p>
<ul>
<li>隔离性（isolation）差<ul>
<li>一个线程崩溃会导致<strong>整个进程</strong>崩溃</li>
<li>很难知道是哪个线程出了问题</li>
</ul>
</li>
</ul>
<h3 id="thread-model">Thread Model 线程模型<a class="headerlink" href="#thread-model" title="Permanent link">&para;</a></h3>
<ul>
<li>Many-to-one<ul>
<li>多个User Thread映射到一个Kernel Thread</li>
<li>无法很好利用多核架构</li>
<li>一个User Thread阻塞会导致整个进程阻塞</li>
</ul>
</li>
<li>One-to-one<ul>
<li>一个User Thread映射到一个Kernel Thread</li>
<li>Create a new user thread requires work from kernel</li>
<li>开销大</li>
</ul>
</li>
<li>Many-to-many<ul>
<li>多个User Thread映射到多个Kernel Thread</li>
<li>如果一个User Thread阻塞，Kernel 创造出一个新的 Kernel Thread，避免整个进程阻塞</li>
</ul>
</li>
<li>Two-level<ul>
<li>可多对多，可一对一</li>
</ul>
</li>
</ul>
<h3 id="thread-library">Thread Library 线程库<a class="headerlink" href="#thread-library" title="Permanent link">&para;</a></h3>
<p>Some demos</p>
<h3 id="linux-thread">Linux Thread<a class="headerlink" href="#linux-thread" title="Permanent link">&para;</a></h3>
<p>使用 <code>clone()</code> 的 SysCall 来创建线程。有如下 flag 可选</p>
<ul>
<li><code>CLONE_VM</code>: 共享内存空间</li>
<li><code>CLONE_FS</code>: 共享文件系统信息</li>
<li><code>CLONE_FILES</code>: 共享文件描述符</li>
<li><code>CLONE_SIGHAND</code>: 共享信号处理程序</li>
</ul>
<p>与此同时，Linux 下 <code>task_struct</code> 存储的是<strong>线程</strong>的 TCB，进程的 PCB 是 <strong>Leader Thread</strong> 的 TCB。（不存在 PCB 了）</p>
<p>同时一个 Process 可由单个线程+一个地址组成，也可以是多个线程+一个地址。</p>
<h3 id="thread-mapping">Thread Mapping 线程映射<a class="headerlink" href="#thread-mapping" title="Permanent link">&para;</a></h3>
<p>一个 Task 可以在 User Mode 下执行线程，此时使用 User Code &amp; User Stack，也可以在 Kernel Mode 下执行（例如调用个 Syscall），使用 Kernel Code &amp; Kernel Stack</p>
<details class="example" open="open">
<summary>eg</summary>
<p>执行 <code>printf()</code> 时，会调用 <code>write()</code>，<code>write()</code> 是一个 SysCall，因此会进入 Kernel Mode，此时会切换到 Kernel Stack，Kernel Code。
- User code: printf(...)
- Kernel code: write(...)</p>
</details>
<h2 id="synchronization">Synchronization 同步<a class="headerlink" href="#synchronization" title="Permanent link">&para;</a></h2>
<div class="admonition example">
<p class="admonition-title">Race Condition</p>
<p>由于 Thread A B 运行的 <code>counter = counter+1</code> 实则是多行指令（寄存器内加1，写回寄存器），因此在 Thread A 读完运算完还没有写回的时候，被 Interrupt，转为 Thread B，Thread B 读取时，读到的是初始的 <code>counter</code> 值，运算后再写回，再由 Thread A 写回，得到的 <code>counter</code> 就只加了1.</p>
<div class="admonition success">
<p class="admonition-title">解决方案</p>
<p>Critical Section: 一段“<strong>原子性</strong>”的代码，同一时间段只能有一个线程在运行。
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">    </span><span class="n">entry_section</span><span class="p">()</span><span class="w">  </span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">        </span><span class="n">Critical</span><span class="w"> </span><span class="n">Section</span><span class="w">  </span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">    </span><span class="n">end_section</span><span class="p">()</span><span class="w">  </span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">        </span><span class="n">remainder</span><span class="w"> </span><span class="n">section</span><span class="w">  </span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="p">}</span>
</code></pre></div></p>
</div>
<details class="info">
<summary>构建 Critical Section aka Synchronization 的解决方案需要满足的条件</summary>
<ul>
<li>Mutual Exclusion: 在同⼀时刻，最多只有⼀个线程可以执⾏临界区</li>
<li>Progress: 当没有线程在执⾏临界区代码时，必须在申请进⼊临界区的线程中选择⼀个线程，允许其执⾏临界区代码，保证程序执⾏的进展</li>
<li>Bounded Waiting: 当⼀个进程申请进⼊临界区后，必须在有限的时间内获得许可并进⼊临界区，不能⽆限等待</li>
</ul>
</details>
</div>
<p>Peterson's Algorithm: 两个线程的 Mutual Exclusion（只适用于两个线程）</p>
<ul>
<li>假设 Load 和 Store 是原子操作（不可被中断）</li>
<li>两个进程共享下面这两个变量作为属性：<ul>
<li><code>flag[2]</code>: 进程是否准备好进入临界区</li>
<li><code>int turn</code>: 轮到哪个进程进入临界区</li>
<li>伪代码如下</li>
</ul>
</li>
</ul>
<p><img alt="Peterson" src="../assets/Sys30.png" /></p>
<p>但是 Peterson 没有看起来那么万能，一是因为只适用两个线程，二是因为可能会导致处理器或编译器对*看起来无害*的操作指令进行<strong>重排序</strong>，这导致其要求线程的Load和Store是原子性的。</p>
<ul>
<li>这在单线程进程里无所谓</li>
<li>多线程里可能会导致非预期的结果！</li>
</ul>
<div class="admonition example">
<p class="admonition-title">e.g.</p>
<p>两个线程共享下面两个变量：
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kt">bool</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></pre></div>
现在线程1执行
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">flag</span><span class="p">);</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
</code></pre></div>
线程2执行
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="n">flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
</code></pre></div>
最后的结果是什么？</p>
<details class="success">
<summary>解答</summary>
<ul>
<li>我们预期的结果是输出100，但结果可能不是这样！</li>
<li>重排序可能导致 <code>flag = true</code> 先执行，<code>x = 100</code> 后执行</li>
</ul>
</details>
<div class="admonition question">
<p class="admonition-title">那咋办</p>
<ul>
<li>引入内存屏障（Memory Barrier）来防止重排序<ul>
<li>一句指令，使内存中所有的变化全部传播到所有其他处理器</li>
<li>现在只需要在线程1，2的两条语句之间加上<code>memory_barrier</code>即可</li>
</ul>
</li>
</ul>
</div>
</div>
<h3 id="_6">硬件支持<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<blockquote>
<p>这一块智云只有半小时有声音，这不炸了吗</p>
</blockquote>
<p>我们有硬件的指令来支持同步：</p>
<h4 id="test-and-set">Test-and-Set<a class="headerlink" href="#test-and-set" title="Permanent link">&para;</a></h4>
<p>设置并返回初始值，原子操作</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kt">bool</span><span class="w"> </span><span class="nf">test_set</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="o">*</span><span class="n">target</span><span class="p">)</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="p">{</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">rv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">target</span><span class="p">;</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="o">*</span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TRUE</span><span class="p">;</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">rv</span><span class="o">:</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="p">}</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="c1">// 实现一个 lock(shared variable)</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="k">do</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">test_set</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock</span><span class="p">));</span><span class="w"> </span><span class="c1">// 如果一个线程先把 lock 设置为 TRUE，那么其他线程到这一行就等待住了</span>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="w">    </span><span class="c1">// Critical Section</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">    </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FALSE</span><span class="p">;</span>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="w">    </span><span class="c1">// Remainder Section</span>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">TRUE</span><span class="p">);</span>
</code></pre></div>
<p>满足互斥，Progress，但是不满足 Bounded Waiting</p>
<h4 id="compare-and-swap">Compare-and-Swap<a class="headerlink" href="#compare-and-swap" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">compare_and_swap</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">expected</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">new_value</span><span class="p">)</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="p">{</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">value</span><span class="p">;</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">expected</span><span class="p">)</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">        </span><span class="o">*</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new_value</span><span class="p">;</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="p">}</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="c1">// 还是实现一个线程共享的 lock</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="k">do</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">compare_and_swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">    </span><span class="c1">// Critical Section</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">    </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="w">    </span><span class="c1">// Remainder Section</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">TRUE</span><span class="p">);</span>
</code></pre></div>
<h3 id="atomic-variable">Atomic Variable 原子性变量<a class="headerlink" href="#atomic-variable" title="Permanent link">&para;</a></h3>
<p>通过上面两种硬件支持的方法，我们可以实现一个原子性变量</p>
<h3 id="mutex-lock-or-spin-lock">Mutex Lock 互斥锁 or Spin Lock<a class="headerlink" href="#mutex-lock-or-spin-lock" title="Permanent link">&para;</a></h3>
<p>利用上面两个函数，可以构造这种用于解决同步的<strong>软件</strong>方案，先<code>acquire</code>锁，再<code>release</code>锁（两个函数调用都得是原子操作），需要"busy waiting"。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">func</span><span class="w"> </span><span class="nf">acquire</span><span class="p">(){</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">available</span><span class="p">);</span><span class="w"> </span><span class="c1">// busy waiting (spin)</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">    </span><span class="n">available</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="p">}</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="n">func</span><span class="w"> </span><span class="nf">release</span><span class="p">(){</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">    </span><span class="n">available</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="p">}</span>
</code></pre></div>
<p>自旋太多了！导致 CPU 利用率低。引入 <code>yield</code> 函数，让出 CPU 给其他线程。（moving from running state to sleeping zZZ）</p>
<ul>
<li>How to implement?<ul>
<li>Add a queue</li>
<li>When the lock is locked, change process’s state to SLEEP, add to the queue, and call schedule()</li>
</ul>
</li>
</ul>
<h3 id="semaphore">Semaphore 信号量<a class="headerlink" href="#semaphore" title="Permanent link">&para;</a></h3>
<p><code>yield</code> 下的 Mutex Lock 还是利用率太低了！</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">semaphore</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">list_head</span><span class="o">*</span><span class="w"> </span><span class="n">waiting_queue</span><span class="p">;</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="p">};</span>
</code></pre></div>
摆了</p>
<h2 id="deadlock">Deadlock 死锁<a class="headerlink" href="#deadlock" title="Permanent link">&para;</a></h2>
<p>两个或多个进程互相等待对方释放资源，导致<strong>所有</strong>进程都无法继续执行。</p>
<h3 id="priority-inversion">Priority Inversion 优先级反转<a class="headerlink" href="#priority-inversion" title="Permanent link">&para;</a></h3>
<p>如果高优先级的进程等待低优先级的进程的 Lock，亦即，<strong>被低优先级进程抢占了</strong></p>
<div class="admonition info">
<p class="admonition-title">Solution</p>
<ul>
<li>优先级继承<ul>
<li>短暂地提高低优先级进程的优先级</li>
</ul>
</li>
</ul>
</div>
<h3 id="condition-variable">Condition Variable 条件变量<a class="headerlink" href="#condition-variable" title="Permanent link">&para;</a></h3>
<p>诶，我们直接定义一个条件变量，让所有线程都等待这个条件变量的信号，这样就不会出现死锁了！</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">While</span><span class="w"> </span><span class="p">(</span><span class="n">condition</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">    </span><span class="n">wait</span><span class="p">(</span><span class="n">condition_variable</span><span class="p">);</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="c1">// Remainder Section</span>
</code></pre></div>
<h3 id="real-problems">Real Problems<a class="headerlink" href="#real-problems" title="Permanent link">&para;</a></h3>
<h4 id="bounded-buffer-problem">Bounded Buffer Problem 有界缓冲问题<a class="headerlink" href="#bounded-buffer-problem" title="Permanent link">&para;</a></h4>
<p>两个进程，一个生产者，一个消费者，共享 n 个 buffer。</p>
<ul>
<li>生产者向 buffer 中写入数据</li>
<li>消费者从 buffer 中移除数据</li>
</ul>
<p>本问题要保证：</p>
<ul>
<li>生产者不会向满的 buffer 写入数据</li>
<li>消费者不会从空的 buffer 移除数据</li>
</ul>
<p>解决方案：定义 mutex 初始为 1，full-slots 初始为 0，empty-slots 初始为 n</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">wait</span><span class="p">(</span><span class="n">S</span><span class="p">){</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="n">S</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">    </span><span class="n">S</span><span class="o">--</span><span class="p">;</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="p">}</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="n">signal</span><span class="p">(</span><span class="n">S</span><span class="p">){</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">    </span><span class="n">S</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c1">// Producer Process</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="k">do</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">    </span><span class="c1">// Produce an item</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="w">    </span><span class="n">wait</span><span class="p">(</span><span class="n">empty</span><span class="o">-</span><span class="n">slots</span><span class="p">);</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="w">    </span><span class="n">wait</span><span class="p">(</span><span class="n">mutex</span><span class="p">);</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">    </span><span class="c1">// add the item to the buffer</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">    </span><span class="n">signal</span><span class="p">(</span><span class="n">mutex</span><span class="p">);</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="w">    </span><span class="n">signal</span><span class="p">(</span><span class="n">full</span><span class="o">-</span><span class="n">slots</span><span class="p">);</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a><span class="c1">// Consumer Process</span>
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a><span class="k">do</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a><span class="w">    </span><span class="n">wait</span><span class="p">(</span><span class="n">full</span><span class="o">-</span><span class="n">slots</span><span class="p">);</span>
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a><span class="w">    </span><span class="n">wait</span><span class="p">(</span><span class="n">mutex</span><span class="p">);</span>
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="w">    </span><span class="c1">// remove an item from the buffer</span>
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a><span class="w">    </span><span class="n">signal</span><span class="p">(</span><span class="n">mutex</span><span class="p">);</span>
<a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a><span class="w">    </span><span class="n">signal</span><span class="p">(</span><span class="n">empty</span><span class="o">-</span><span class="n">slots</span><span class="p">);</span>
<a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a><span class="w">    </span><span class="c1">// consume the item</span>
<a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</code></pre></div>
<p>这里还有几个思考题（我没记</p>
<h4 id="readers-writers-problem">Readers-Writers Problem 读者写者问题<a class="headerlink" href="#readers-writers-problem" title="Permanent link">&para;</a></h4>
<p>一系列进程共享一个 data set，有两种进程：</p>
<ul>
<li>Readers: 只读取数据，不修改</li>
<li>Writers: 能读取数据，也能修改数据</li>
<li>多个 Readers 可以共存，但是 Readers 和 Writers 之间互斥，Writers 之间也互斥</li>
</ul>
<p>解决方案：定义 mutex 初始为 1，write 初始为 1，read_count 初始为 0</p>
<p><code>mutex</code>保护<code>read_count</code>，<code>read_count</code> 记录当前 Reader 的数量</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="c1">// Writer Process</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="k">do</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">    </span><span class="n">wait</span><span class="p">(</span><span class="n">write</span><span class="p">);</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">    </span><span class="c1">// write shared data</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">    </span><span class="n">signal</span><span class="p">(</span><span class="n">write</span><span class="p">);</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="c1">// Reader Process</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="k">do</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="w">    </span><span class="n">wait</span><span class="p">(</span><span class="n">mutex</span><span class="p">);</span>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="w">    </span><span class="n">read_count</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="w">        </span><span class="n">wait</span><span class="p">(</span><span class="n">write</span><span class="p">);</span>
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a><span class="w">    </span><span class="n">signal</span><span class="p">(</span><span class="n">mutex</span><span class="p">);</span>
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a><span class="w">    </span><span class="c1">// read shared data</span>
<a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a><span class="w">    </span><span class="p">...</span>
<a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a><span class="w">    </span><span class="n">wait</span><span class="p">(</span><span class="n">mutex</span><span class="p">);</span>
<a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a><span class="w">    </span><span class="n">read_count</span><span class="o">--</span><span class="p">;</span>
<a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a><span class="w">        </span><span class="n">signal</span><span class="p">(</span><span class="n">write</span><span class="p">);</span>
<a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a><span class="w">    </span><span class="n">signal</span><span class="p">(</span><span class="n">mutex</span><span class="p">);</span>
<a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</code></pre></div>
<div class="admonition extra">
<p class="admonition-title">变种</p>
<ul>
<li>Reader First</li>
<li>Writer First</li>
</ul>
</div>
<h3 id="deadlock_1">Deadlock 发生的条件<a class="headerlink" href="#deadlock_1" title="Permanent link">&para;</a></h3>
<ul>
<li>Mutual Exclusion: 资源不共享，一种资源在某个时段只能被一个进程持有</li>
<li>Hold and Wait: 持有至少一个资源的进程等待获取正被其他进程持有的其他资源</li>
<li>No Preemption: 资源只能被持有者自愿释放</li>
<li>Circular Wait: 一系列进程互相等待对方释放资源</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Resource Allocation Graph</p>
<ul>
<li>一个图，节点是所有进程（<span class="arithmatex">\({P_1, P_2, ..., P_n}\)</span>）和资源（<span class="arithmatex">\({R_1, R_2, ..., R_m}\)</span>）</li>
<li>两种边：<ul>
<li>Request Edge：<span class="arithmatex">\(P_i\)</span> 指向 <span class="arithmatex">\(R_j\)</span> 的有向边，表示 <span class="arithmatex">\(P_i\)</span> 请求 <span class="arithmatex">\(R_j\)</span> （进程尚未持有资源）</li>
<li>Assignment Edge：<span class="arithmatex">\(R_j\)</span> 指向 <span class="arithmatex">\(P_i\)</span> 的有向边，表示 <span class="arithmatex">\(R_j\)</span> 被 <span class="arithmatex">\(P_i\)</span> 持有 （进程已经持有资源）</li>
</ul>
</li>
<li>例<ul>
<li><img alt="e.g.Resource Alloc Graph" src="../assets/Sys31.png" /></li>
<li>这里 R 节点中不同的点代表一个资源的不同 Instance </li>
</ul>
</li>
<li>这里有一类判断这种图是否含有死锁的题，思路一般是<ul>
<li>先找哪个进程能执行，执行掉，然后释放资源</li>
<li>然后看能不能继续执行别的进程</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Basic Facts</p>
<ul>
<li>如果图中没有环，那么没有死锁</li>
<li>如果有环<ul>
<li>且每个资源只有一个实例，那么有死锁</li>
<li>且每个资源有多个实例，那么可能有死锁</li>
</ul>
</li>
</ul>
</div>
</div>
<h3 id="deadlock-prevention">Deadlock 的预防 Prevention<a class="headerlink" href="#deadlock-prevention" title="Permanent link">&para;</a></h3>
<p>只需要考虑预防上面四个条件（其一）就够了</p>
<ul>
<li>Prevent Mutual Exclusion: 这个可以不考虑：对于不共享的资源，额那只能互斥，对于共享的资源我们又不需要担心</li>
<li>Prevent Hold and Wait: 一个进程要么在执行前一次性 Request 所有资源，要么只有在不持有任何资源时才能 Request 资源<ul>
<li>导致资源利用率降低，可能会导致 Starvation</li>
</ul>
</li>
<li>Prevent No Preemption: 如果一个进程持有资源，但是又请求其他资源，那么就释放已持有的资源，将资源加入到 Request 队列中（没看懂）</li>
<li>Prevent Circular Wait: 给资源编号，进程只能按编号递增的顺序请求资源</li>
</ul>
<h3 id="deadlock-avoidance">Deadlock 的避免 Avoidance<a class="headerlink" href="#deadlock-avoidance" title="Permanent link">&para;</a></h3>
<p>与预防不同，使用 Deadlock Avoidance 算法确保不会出现循环等待。</p>
<p>SAFE STATE: 如果系统能够分配资源序列，使得每个进程按某种顺序获得资源都能完成，那么系统处于 SAFE STATE</p>
<ul>
<li>Safe State 里的进程不会发生 Deadlock，Unsafe State <strong>可能</strong>会发生 Deadlock</li>
</ul>
<p>这里对于多实例的资源，使用 Banker's Algorithm，懒得记了，在 deadlock 的 ppt 靠后的部分。</p>
<p>感觉研究这一个例子就够了：</p>
<p><img alt="Banker's Algorithm" src="../assets/Sys32.png" /></p>
<h3 id="deadlock-detection">Deadlock 的检测 Detection<a class="headerlink" href="#deadlock-detection" title="Permanent link">&para;</a></h3>
<p>即使预防和避免，还是没能让死锁大人尽兴吗···</p>
<p>Allow system to enter deadlock state, but detect and recover from it</p>
<ul>
<li>资源只有单实例<ul>
<li>通过 Resource Allocation Graph 检测</li>
<li>也就是检测是否有环<ul>
<li>诶，我这儿还有一离散</li>
</ul>
</li>
<li>把图里所有的资源节点都视为边（我总感觉像极了离散里讲过的一个操作），之后图只有进程节点，称为 Wait-for Graph</li>
</ul>
</li>
<li>资源有多实例<ul>
<li>这里就需要用到类似 Banker's Algorithm 的方法了</li>
<li>就是利用 Banker，鉴定一下能不能进入 Safe State，不能就说明有死锁</li>
</ul>
</li>
</ul>
<h3 id="deadlock-recovery">Deadlock 的解决 Recovery<a class="headerlink" href="#deadlock-recovery" title="Permanent link">&para;</a></h3>
<ul>
<li>Process Termination<ul>
<li>终止死锁的进程</li>
<li>每次终止一个进程，直到死锁解除</li>
</ul>
</li>
</ul>
<p>或者</p>
<ul>
<li>Resource Preemption<ul>
<li>抢占资源</li>
<li>选择一个进程，释放资源，回滚到某个 Checkpoint</li>
<li>可能会导致 Starvation</li>
</ul>
</li>
</ul>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年12月29日</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="创建日期">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年9月13日</span>
  </span>

    
    
    
  </aside>





  <h2 id="__comments">评论</h2>
  <script src="https://giscus.app/client.js"
        data-repo="shrike-505/Nest"
        data-repo-id="R_kgDOKfuSyA"
        data-category="Announcements"
        data-category-id="DIC_kwDOKfuSyM4Ca9sf"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
  </script>

  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate" ? "dark" : "light"
      giscus.setAttribute("data-theme", theme) 
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate" ? "dark" : "light"

          /* Instruct Giscus to change theme */
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../ComputerSystem1/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 计算机系统Ⅰ">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                计算机系统Ⅰ
              </div>
            </div>
          </a>
        
        
          
          <a href="../FDS/" class="md-footer__link md-footer__link--next" aria-label="下一页: 数据结构基础">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                数据结构基础
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 <a href="https://github.com/shrike-505" target="_blank">shrike505</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="mailto:<mikamidouya@outlook.com>" target="_blank" rel="noopener" title="Email" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://shrike505.cc/" target="_blank" rel="noopener" title="HomePage" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.footer", "navigation.path", "navigation.indexes", "navigation.top"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../../../js/print-site.js"></script>
      
        <script src="../../../javascript/katex.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>